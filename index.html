<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ritual Net Map</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background-color: #000000;
            color: #00ff41;
            font-family: 'Courier New', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        h1 {
            color: #00ff41;
            text-shadow: 0 0 10px #00ff41;
            margin-bottom: 10px;
        }
        .logo {
            width: 100px;
            height: 100px;
            background: linear-gradient(45deg, #000000, #004d00);
            border: 2px solid #00ff41;
            border-radius: 50%;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.5);
        }
        .pin-section {
            margin-bottom: 20px;
            text-align: center;
        }
        .pin-button {
            background: #004d00;
            color: #00ff41;
            border: 1px solid #00ff41;
            padding: 10px 20px;
            cursor: pointer;
            font-family: inherit;
            transition: all 0.3s;
        }
        .pin-button:hover {
            background: #00ff41;
            color: #000000;
            box-shadow: 0 0 15px #00ff41;
        }
        .views {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }
        .view-button {
            background: #000000;
            color: #00ff41;
            border: 1px solid #00ff41;
            padding: 10px 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .view-button.active {
            background: #00ff41;
            color: #000000;
            box-shadow: 0 0 10px #00ff41;
        }
        .map-container {
            margin-top: 30px;
            width: 80%;
            height: 400px;
            border: 1px solid #00ff41;
            position: relative;
            overflow: hidden;
            background: radial-gradient(circle, #001a00 0%, #000000 100%);
        }
        .map-svg {
            width: 100%;
            height: 100%;
        }
        .node {
            fill: #00ff41;
            stroke: #000000;
            stroke-width: 2;
        }
        .link {
            stroke: #008000;
            stroke-opacity: 0.6;
        }
        .cluster {
            fill: #004d00;
            stroke: #00ff41;
        }
        hr {
            border: none;
            border-top: 1px solid #00ff41;
            width: 100%;
            opacity: 0.5;
        }
    </style>
</head>
<body>
    <h1>Ritual Net Map</h1>
    <div class="logo">üï∏Ô∏è</div>
    <div class="pin-section">
        <h3>### Pin Your Location</h3>
        <button class="pin-button" onclick="pinLocation()">Pin Location</button>
    </div>
    <hr>
    <div class="views">
        <button class="view-button active" onclick="switchView('avatar')">Avatar View</button>
        <button class="view-button" onclick="switchView('cluster')">Cluster View</button>
    </div>
    <div class="map-container" id="mapContainer">
        <svg class="map-svg" id="mapSvg">
            <!-- Default Avatar View: Individual nodes with connections -->
            <defs>
                <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#00ff41" />
                </marker>
            </defs>
            <line class="link" x1="100" y1="100" x2="300" y2="200" marker-end="url(#arrow)" />
            <line class="link" x1="200" y1="50" x2="400" y2="150" marker-end="url(#arrow)" />
            <line class="link" x1="300" y1="300" x2="500" y2="100" marker-end="url(#arrow)" />
            <circle class="node" cx="100" cy="100" r="5" />
            <circle class="node" cx="300" cy="200" r="5" />
            <circle class="node" cx="200" cy="50" r="5" />
            <circle class="node" cx="400" cy="150" r="5" />
            <circle class="node" cx="300" cy="300" r="5" />
            <circle class="node" cx="500" cy="100" r="5" />
        </svg>
    </div>

    <script>
        let currentView = 'avatar';

        function pinLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition((position) => {
                    alert(`Pinned at: ${position.coords.latitude}, ${position.coords.longitude}`);
                });
            } else {
                alert('Geolocation not supported. Using demo coords: 37.7749, -122.4194');
            }
        }

        function switchView(view) {
            currentView = view;
            const buttons = document.querySelectorAll('.view-button');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            const svg = document.getElementById('mapSvg');
            svg.innerHTML = ''; // Clear

            if (view === 'avatar') {
                // Avatar View: Individual glowing nodes and links
                svg.innerHTML = `
                    <defs>
                        <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#00ff41" />
                        </marker>
                    </defs>
                    <line class="link" x1="100" y1="100" x2="300" y2="200" marker-end="url(#arrow)" />
                    <line class="link" x1="200" y1="50" x2="400" y2="150" marker-end="url(#arrow)" />
                    <line class="link" x1="300" y1="300" x2="500" y2="100" marker-end="url(#arrow)" />
                    <circle class="node" cx="100" cy="100" r="5" filter="url(#glow)" />
                    <circle class="node" cx="300" cy="200" r="5" filter="url(#glow)" />
                    <circle class="node" cx="200" cy="50" r="5" filter="url(#glow)" />
                    <circle class="node" cx="400" cy="150" r="5" filter="url(#glow)" />
                    <circle class="node" cx="300" cy="300" r="5" filter="url(#glow)" />
                    <circle class="node" cx="500" cy="100" r="5" filter="url(#glow)" />
                `;
            } else {
                // Cluster View: Grouped clusters with thicker links
                svg.innerHTML = `
                    <line class="link" x1="150" y1="150" x2="450" y2="150" stroke-width="3" />
                    <circle class="cluster" cx="150" cy="150" r="20" />
                    <circle class="cluster" cx="450" cy="150" r="20" />
                    <text x="150" y="145" fill="#00ff41" text-anchor="middle" font-size="12">Cluster A</text>
                    <text x="450" y="145" fill="#00ff41" text-anchor="middle" font-size="12">Cluster B</text>
                `;
            }
        }
    </script>
</body>
</html>
